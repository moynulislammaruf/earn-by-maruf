<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Click To Earn By Nobab</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src='//libtl.com/sdk.js' data-zone='9606399' data-sdk='show_9606399'></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* your existing CSS remains unchanged */
    :root { --primary-color: #2ed914; --primary-hover: #3bff21; --secondary-color: #2a2a2e; --background-color: #1c1c1f; --text-color: #f0f0f0; --text-muted-color: #a0a0a0; --accent-color: #ff8c00; --card-bg: #252528; }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { margin: 0; padding: 0; background-color: var(--background-color); color: var(--text-color); font-family: 'Segoe UI', 'Roboto', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    .container { width: 100%; height: 100%; max-width: 400px; background: var(--background-color); display: flex; flex-direction: column; overflow: hidden; position: relative; }
    /* rest of CSS skipped for brevity */
  </style>
</head>
<body>
  <div class="container">
    <!-- HTML body content remains unchanged -->
  </div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD7GlPgD_-xqFTvDM8DWFIAOMDh2s8iTmM",
    authDomain: "click-to-earn-caf36.firebaseapp.com",
    projectId: "click-to-earn-caf36",
    storageBucket: "click-to-earn-caf36.appspot.com",
    messagingSenderId: "1054604788334",
    appId: "1:1054604788334:web:1b6fd1fbf3626718095c7f",
    measurementId: "G-G3LYC332LH"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>
<script>
  let points = 0;
  let balance = 0.00;
  let historyLog = [];
  let tgUser = null;
  const pointsPerAd = 1;
  const ratePerPoint = 0.01;

  document.addEventListener('DOMContentLoaded', () => {
    initApp();
  });

  function initApp() {
    if (window.Telegram && Telegram.WebApp) {
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();
      tgUser = Telegram.WebApp.initDataUnsafe.user;
    }
    loadData();
    loadTelegramUser();
    showView('home-view');
    renderLeaderboard();
    initializeInAppAds();
  }

  async function loadData() {
    if (!tgUser) return;
    const userRef = db.collection("users").doc(tgUser.id.toString());
    const docSnap = await userRef.get();
    if (docSnap.exists) {
      const data = docSnap.data();
      points = data.points || 0;
      balance = data.balance || 0.0;
      historyLog = data.historyLog || [];
    }
    updateDisplay();
  }

  async function saveData() {
    if (!tgUser) return;
    await db.collection("users").doc(tgUser.id.toString()).set({ points, balance, historyLog });
  }
</script>
<!-- keep your existing script content below, only replacing loadData, saveData and adding firebase init -->
</body>
</html>
